<html>

<head>
  <title>Kanji Tree</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta charset="UTF-8">
  <script src="data.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <script>
    function buildTree(myKanjiSource) {
      const my = JSON.stringify(myKanjiSource.split('\n'));
      JSON.parse(localStorage.getItem('joyouKanjiAll')).forEach(k => {
        let classes = [];
        classes.push('level' + k.l);
        if (my.includes(k.k)) {
          classes.push('joyou_known')
        } else {
          classes.push('focus' + k.l)
        }
        document.body.insertAdjacentHTML('beforeend', `
            <div class="joyou ${classes.join(' ')}">${k.k}</div>
          `)
      });
    }
    const myKanjiSource = null;
    const request = new XMLHttpRequest();
    request.open('GET', 'kanji-list-my-known.txt', true);
    request.onload = function () {
      if (request.responseText) {
        buildTree(request.responseText)
      }
    };
    request.send();
  </script>
</body>

</html>
